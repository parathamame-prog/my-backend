<script>
    // Register Function (යාවත්කාලීන කරන ලදී)
    async function registerUser() {
        const username = document.getElementById('reg-username').value;
        const password = document.getElementById('reg-password').value;

        try {
            const response = await fetch('/register', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ username, password })
            });

            const data = await response.json();

            // මෙන්න මෙතනයි වෙනස:
            if (data.success) {
                alert("✅ " + data.message); // සාර්ථක නම් Message එක
            } else {
                // අසාර්ථක නම් Error එක හෝ Message එක පෙන්වන්න
                alert("⚠️ Error: " + (data.error || data.message));
            }
        } catch (err) {
            alert("❌ System Error: " + err);
        }
    }

    // Login Function
    async function loginUser() {
        const username = document.getElementById('login-username').value;
        const password = document.getElementById('login-password').value;

        try {
            const response = await fetch('/login', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ username, password })
            });

            const data = await response.json();
            
            if (data.success) {
                alert("✅ " + data.message);
            } else {
                alert("❌ " + (data.message || data.error));
            }
        } catch (err) {
            alert("❌ System Error: " + err);
        }
    }
</script>